{"version":3,"sources":["webpack:///./src/components/processview/processViewer.vue?2b5a","webpack:///./src/components/processview/mainView.vue?d7af","webpack:///./src/components/processview/processViewer.vue?d6a7","webpack:///src/components/processview/processViewer.vue","webpack:///./src/components/processview/processViewer.vue?32ad","webpack:///./src/components/processview/processViewer.vue?72fd","webpack:///src/components/processview/mainView.vue","webpack:///./src/components/processview/mainView.vue?d7d0","webpack:///./src/components/processview/mainView.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticRenderFns","staticClass","on","$event","fixZoom","_v","ref","attrs","created","data","paramInUrl","process","xml","defaultXmlStr","nodeStatus","bpmnModeler","currentCanvasXml","style","stroke","fill","0","1","watch","methods","initView","containerEl","$refs","viewContainer","destroy","onNodeRenderStyle","element","id","get","zoom","hoverEvent","eventBus","overlays","add","e","position","html","$overlayHtml","clear","component","components"],"mappings":"kHAAA,yBAAse,EAAG,G,2CCAze,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,kBAAkB,IAC3HE,EAAkB,GCDlB,EAAS,WAAa,IAAIN,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACG,YAAY,aAAa,CAACH,EAAG,YAAY,CAACG,YAAY,UAAUC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOT,EAAIU,aAAa,CAACV,EAAIW,GAAG,QAAQP,EAAG,MAAM,CAACQ,IAAI,gBAAgBC,MAAM,CAAC,GAAK,oBAAoB,IACzS,EAAkB,G,yFCctB,GACEC,QADF,aAEE,QAFF,WAEA,2JACA,aACA,uCACA,wCAEA,mBALA,gCAOA,eAPA,OAOA,UAPA,cAUA,yBAVA,8CAYEC,KAdF,WAeI,MAAO,CAELC,WAAY,GACZC,QAAS,CACPC,IAAKC,EAAb,KACQC,WAAY,CAApB,iCAEMC,YAAa,KAEbC,iBAAkBH,EAAxB,KACMI,MAAO,CACL,KAAM,CACJC,OAAQ,UACRC,KAAM,WAERC,EAAG,GACHC,EAAG,CACDH,OAAQ,UACRC,KAAM,cAKdG,MAAO,GACPC,QAAS,CACPC,SADJ,WAEM7B,KAAK8B,YAAc9B,KAAK+B,MAAMC,cAE9BhC,KAAKoB,aAAepB,KAAKoB,YAAYa,UACrCjC,KAAKoB,YAAc,IAAI,EAA7B,oCAGI,WARJ,SAQA,iLACA,sBADA,cACA,EADA,yBAGA,aAHA,8CAKI,YAbJ,SAaA,gLACA,gBADA,SAEA,mBAFA,OAEA,EAFA,OAGA,eACA,uBACA,sBACA,2BACA,oBACA,uBACA,6BACA,oBAGA,kBACA,mBACA,uBAfA,8CAiBIc,kBA9BJ,SA8BA,GACM,OAAOlC,KAAKsB,MAAMtB,KAAKgB,QAAQG,WAAWgB,EAAQC,MAEpD3B,QAjCJ,SAiCA,GACMT,KAAKoB,YAAYiB,IAAI,UAAUC,KAAK,iBAGtCC,WArCJ,WAuCM,IAAN,mCACA,mCACMC,EAASjC,GAAG,iBAAiB,SAAnC,GACQ,IAAR,QAIQkC,EAASC,IAAIC,EAAER,QAAQC,GAAI,CACzBQ,SAAU,CAApB,6BACUC,KAAMC,OAGVN,EAASjC,GAAG,eAAe,WACzBkC,EAASM,cC1GqV,I,wBCQlWC,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,EAAAA,E,QCXf,GACEC,WAAY,CAAd,iBACEnC,KAFF,WAGI,MAAO,KCXsV,ICO7V,EAAY,eACd,EACAhB,EACAO,GACA,EACA,KACA,KACA,MAIa,e","file":"js/chunk-289d10ca.ab135071.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./processViewer.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./processViewer.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('processViewer')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('el-button',{staticClass:\"primary\",on:{\"click\":function($event){return _vm.fixZoom()}}},[_vm._v(\"居中\")]),_c('div',{ref:\"viewContainer\",attrs:{\"id\":\"viewContainer\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\">\r\n    <el-button @click=\"fixZoom()\" class=\"primary\">居中</el-button>\r\n    <!-- <el-button type=\"primary\" @click=\"previewTemp\">预览</el-button>\r\n    <el-button type=\"success\" @click=\"handleZoom(1)\">放大</el-button>\r\n    <el-button type=\"warning\" @click=\"handleZoom(-1)\">缩小</el-button>-->\r\n\r\n    <div id=\"viewContainer\" ref=\"viewContainer\"></div>\r\n  </div>\r\n</template>\r\n<script>\r\n// import jquery from \"jquery\";\r\nimport BpmnModeler from \"bpmn-js/lib/Modeler\";\r\nimport { defaultXmlStr } from \"@/../resources/defaultXmlStr\";\r\nimport Axios from \"axios\";\r\nexport default {\r\n  created() {},\r\n  async mounted() {\r\n    this.initView();\r\n    if (this.paramInUrl == \"\" || this.paramInUrl == null) {\r\n      this.paramInUrl = this.$route.query.paramInUrl;\r\n    }\r\n    if (this.paramInUrl != null) {\r\n    //   console.log(\"fetching\");\r\n      this.process = await this.getProcess();\r\n    //   console.log(this.process);\r\n    }\r\n    this.drawProcess(this.process);\r\n  },\r\n  data() {\r\n    return {\r\n      // http://localhost:8080/static/process.json\r\n      paramInUrl: \"\",\r\n      process: {\r\n        xml: defaultXmlStr,\r\n        nodeStatus: { task_1: -1, StartEvent_1y45yut: 1 }\r\n      },\r\n      bpmnModeler: null,\r\n      // 此变量为预览的xml文件数据，由于行数过多，附在了附件中，使用时，将附件整个复值到currentCanvasXml即可\r\n      currentCanvasXml: defaultXmlStr,\r\n      style: {\r\n        \"-1\": {\r\n          stroke: \"#c3272b\",\r\n          fill: \"#f3f8f1\"\r\n        },\r\n        0: {},\r\n        1: {\r\n          stroke: \"#475164\",\r\n          fill: \"#5e6a6d\" //\r\n        }\r\n      }\r\n    };\r\n  },\r\n  watch: {},\r\n  methods: {\r\n    initView() {\r\n      this.containerEl = this.$refs.viewContainer;\r\n      // 避免缓存，每次清一下\r\n      this.bpmnModeler && this.bpmnModeler.destroy();\r\n      this.bpmnModeler = new BpmnModeler({ container: this.containerEl });\r\n      //   const viewer = this.bpmnModeler;\r\n    },\r\n    async getProcess(paramInUrl) {\r\n      var res = await Axios.get(this.paramInUrl);\r\n    //   console.log(\"res\", res);\r\n      return res.data.data;\r\n    },\r\n    async drawProcess(process) {\r\n      var viewer = this.bpmnModeler;\r\n      var warns = await viewer.importXML(process.xml);\r\n      console.log(warns);\r\n      if (warns.warnings.length == 0) {\r\n        console.log(\"render\");\r\n        const elementRegistry = viewer.get(\"elementRegistry\");\r\n        let modeling = viewer.get(\"modeling\");\r\n        elementRegistry.forEach(element => {\r\n          var style = this.onNodeRenderStyle(element);\r\n          modeling.setColor(element, style);\r\n        });\r\n      }\r\n      const canvas = viewer.get(\"canvas\");\r\n      console.log(\"fix\");\r\n      canvas.zoom(\"fit-viewport\");\r\n    },\r\n    onNodeRenderStyle(element) {\r\n      return this.style[this.process.nodeStatus[element.id]];\r\n    },\r\n    fixZoom(value) {\r\n      this.bpmnModeler.get(\"canvas\").zoom(\"fit-viewport\");\r\n    },\r\n\r\n    hoverEvent() {\r\n      // 以下代码为：为节点注册鼠标悬浮事件\r\n      const eventBus = this.bpmnModeler.get(\"eventBus\");\r\n      const overlays = this.bpmnModeler.get(\"overlays\");\r\n      eventBus.on(\"element.hover\", e => {\r\n        const $overlayHtml = \"hhh\";\r\n        //  jquery(` <div class=\"tipBox\">\r\n        //         你好，我是悬浮框里的内容\r\n        //         </div>`);\r\n        overlays.add(e.element.id, {\r\n          position: { top: e.element.height, left: 0 },\r\n          html: $overlayHtml\r\n        });\r\n      });\r\n      eventBus.on(\"element.out\", () => {\r\n        overlays.clear();\r\n      });\r\n      //  注册悬浮事件结束\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style  >\r\n.container {\r\n  height: 100%;\r\n}\r\n#viewContainer .djs-palette {\r\n  display: none;\r\n}\r\n\r\n#viewContainer {\r\n  height: 100%;\r\n}\r\n</style>\r\n ","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./processViewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./processViewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./processViewer.vue?vue&type=template&id=c1aaa052&\"\nimport script from \"./processViewer.vue?vue&type=script&lang=js&\"\nexport * from \"./processViewer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./processViewer.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div>\r\n    <processViewer></processViewer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport processViewer from \"@/components/processview/processViewer\";\r\nexport default {\r\n  components: { processViewer },\r\n  data() {\r\n    return {};\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mainView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mainView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./mainView.vue?vue&type=template&id=64f8c6ba&\"\nimport script from \"./mainView.vue?vue&type=script&lang=js&\"\nexport * from \"./mainView.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}